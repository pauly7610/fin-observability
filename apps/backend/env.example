# Database
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=fin_observability
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/fin_observability

# Redis (for compliance metrics persistence)
REDIS_URL=redis://localhost:6379/0

# CORS (comma-separated origins)
CORS_ORIGINS=http://localhost:3000

# Authentication (full product: all users must sign in)
AUTH_MODE=header
JWT_SECRET_KEY=fin-observability-dev-secret-key-change-in-production
JWT_EXPIRE_MINUTES=60

# Clerk: JWKS URL from Dashboard > Sessions > Frontend API + /.well-known/jwks.json
# CLERK_JWKS_URL=https://<your-instance>.clerk.accounts.dev/.well-known/jwks.json
# Add primaryEmail to session token (Dashboard > Sessions > Customize session token)

# Disable open registration (users sign up via Clerk)
REGISTER_ENABLED=false

# Do not trust x-user-email/x-user-role from client (spoofable)
TRUST_HEADER_AUTH=false

# Webhook: required (set for local dev too, e.g. WEBHOOK_API_KEY=dev-webhook-key)
WEBHOOK_API_KEY=

# PII hashing: salt for deterministic hashing of personal data (set in production)
# PII_HASH_SALT=your-secret-salt
# PII_HASH_ENABLED=true

# Audit retention: years to retain compliance-relevant entries (default 7, per SEC 17a-4)
# AUDIT_RETENTION_YEARS=7

# WebSocket: require ?token=<jwt> for /ws/incidents and /ws/compliance. Set WS_AUTH_DISABLED=true for dev/tests.
WS_AUTH_DISABLED=false

# Optional: JSON array of systems for /api/systems when not deriving from SystemMetric
# SYSTEMS_CONFIG=[{"id":"1","name":"Trading System"},{"id":"2","name":"Risk Management"}]

# Optional: When true, empty scenarios/audit_trail return curated demo data (default: true)
USE_DEMO_FALLBACK=true

# Kafka (optional - consumer runs in-app when set)
KAFKA_BROKERS=
KAFKA_GROUP=fin-observability-consumer
KAFKA_TOPICS=orders,executions,trades
STUCK_ORDER_THRESHOLD_MINUTES=5

# Incident Notifications (optional)
SLACK_WEBHOOK_URL=
INCIDENT_WEBHOOK_URL=
INCIDENT_NOTIFY_MIN_PRIORITY=1

# SIEM Integration
SIEM_SYSLOG_HOST=localhost
SIEM_SYSLOG_PORT=514

# Agentic Escalation
AGENT_ACTION_ESCALATION_HOURS=24

# Email Export (optional)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=user@example.com
SMTP_PASSWORD=password
EXPORT_EMAIL_TO=compliance@example.com

# AWS S3 Export (optional)
EXPORT_S3_BUCKET=fin-observability-exports
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1

# Vault (optional)
USE_VAULT_FOR_SIGNING_KEY=false
VAULT_TYPE=aws
EXPORT_SIGNING_KEY=private_key.pem

# LLM Provider (openai, anthropic, or google â€” optional, auto-detected from API key)
# LLM_PROVIDER=openai
# LLM_MODEL=gpt-4o

# OpenAI (optional - services work without it using heuristic fallback)
# OPENAI_API_KEY=sk-...

# Anthropic (optional - alternative to OpenAI)
# ANTHROPIC_API_KEY=sk-ant-...

# Google Gemini (optional - alternative to OpenAI)
# GOOGLE_API_KEY=AI...

OTEL_EXPORTER_OTLP_ENDPOINT=ravishing-prosperity.railway.internal:4317

# MCP Server: set explicitly, or leave unset to auto-generate (persisted in system_config, no dups)
# MCP_API_KEY=
# MCP_PUBLIC_URL or API_URL used for /mcp/tools response (e.g. https://your-domain.com)
MCP_PUBLIC_URL=
API_URL=